<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="com.zenith.admin.message.dao.AdminSmsSendDao"> 


<select id="smsSendList" parameterType="hashmap" resultType="hashmap"> 
<include refid="common.stratPage" /> 
	SELECT		SEND_ID		,(SELECT C_TITLE FROM SMS_CONTENT S1 WHERE S1.C_ID = S2.C_ID) AS C_TITLE
				,U_ID			,USER_NAME		,PHONE		,MID	,SMS_TYPE	
				,RESULT_CODE	,RESULT_MESSAGE
				,DATE_FORMAT(CREATE_DATE, '%Y-%m-%d %T') AS CREATE_DATE 
	FROM 		SMS_SEND S2
	<where> 
		<if test="sUId != null and sUId != ''"> 
			AND	U_ID = #{sUId}
		</if>
		<if test="sUserName != null and sUserName != ''"> 
			AND	USER_NAME LIKE CONCAT('%' ,#{ sUserName }, '%')
		</if>
		<if test="sPhone != null and sPhone != ''"> 
			AND	PHONE = #{sPhone}
		</if>
	</where>
	ORDER BY SEND_ID DESC
<include refid="common.endPage" /> 
</select>


<select id="smsSendListCnt" parameterType="hashmap" resultType="int">
	SELECT		COUNT(1) 
	FROM 		SMS_SEND 
	<where> 
		<if test="sPhone != null and sPhone != ''"> 
			AND	PHONE = #{sPhone}
		</if>
		<if test="sUserName != null and sUserName != ''"> 
			AND	USER_NAME = #{sUserName}
		</if>
		<if test="sPhone != null and sPhone != ''"> 
			AND	PHONE = #{sPhone}
		</if>
	</where>
</select> 
 
</mapper>


