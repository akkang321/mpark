<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zenith.admin.academy.dao.AdminAcademyScheduleDao">
	<select id="academyScheduleList" resultType="hashmap">
			SELECT 	S.S_ID	,CONCAT(S.SCHEDULE_DATE, ' ' , S.START_TIME) AS START_DATE
					,CONCAT(S.SCHEDULE_DATE, ' ' , S.END_TIME) AS END_DATE
					,DATE_FORMAT(S.START_TIME,'%H:%i') AS START_TIME
					,DATE_FORMAT(S.END_TIME,'%H:%i') AS END_TIME
					,FN_TEACHER_NAME(C.T_ID) AS FN_TEACHER_NAME
					,C.CLASS_NAME
			FROM 	SCHEDULE_INFO S INNER JOIN CLASS_INFO C
			WHERE	S.C_ID = C.C_ID
			<if test="sClassName != null and sClassName != ''">
				AND C.CLASS_NAME  LIKE CONCAT('%',#{sClassName},'%') 
			</if>
			<if test="sTeacherName != null and sTeacherName != ''">
				AND FN_TEACHER_NAME(C.T_ID)  LIKE CONCAT('%',#{sTeacherName},'%')  
			</if>
	</select>
</mapper>

