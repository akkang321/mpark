<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zenith.user.userInfo.dao.UserJoinDao">
	
	<select id="checkEmail" parameterType="string">
		SELECT 	COUNT(1)
		FROM 	USER_INFO
		WHERE 	EMAIL=#{email}
	</select>
	
	<insert id="userInsert" parameterType="hashmap">
		INSERT 		INTO 		USER_INFO(	U_ID		,EMAIL		,USER_NAME		,USER_PW		
											,PHONE		,USER_STATE		,USER_TYPE		,CREATE_DATE) 
		
		VALUES(		#{uId}		,#{email}		,#{userName}		,#{userPw}
					,#{phone}		,'C020100'		,'C010200'			,NOW())
	</insert>
	
	<select id="checkUserId" parameterType="hashmap" resultType="int">
		SELECT		COUNT(1) 
		FROM 		USER_INFO
		WHERE 		U_ID = #{uId}
	</select>

	<select id="selectUserInfo" parameterType="hashmap" resultType="hashmap">
		SELECT	U_ID		,PHONE		,EMAIL		,USER_TYPE
				,DATE_FORMAT(UPDATE_DATE, '%Y-%m-%d %H:%i:%s') AS UPDATE_DATE
				,DATE_FORMAT(CREATE_DATE, '%Y-%m-%d %H:%i:%s') AS CREATE_DATE
				,DATE_FORMAT(LOGIN_DATE, '%Y-%m-%d %H:%i:%s') AS LOGIN_DATE
				,UPDATE_ID
		FROM 	USER_INFO 
		WHERE 	USER_TYPE = 'C010200'
		AND		U_ID = #{uId}
	</select>
	
</mapper>

